(function(e){function t(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function n(e,t){if(e.length!=t.length)return false;for(var n=0;n<e.length;n++){if(e[n]!==t[n])return false}return true}function r(e){for(b in E)E[b]=e[k[b]]}function i(e){var n,i,s,o,a,f;n=e.keyCode;if(t(C,n)==-1){C.push(n)}if(n==93||n==224)n=91;if(n in E){E[n]=true;for(s in x)if(x[s]==n)u[s]=true;return}r(e);if(!u.filter.call(this,e))return;if(!(n in w))return;f=p();for(o=0;o<w[n].length;o++){i=w[n][o];if(i.scope==f||i.scope=="all"){a=i.mods.length>0;for(s in E)if(!E[s]&&t(i.mods,+s)>-1||E[s]&&t(i.mods,+s)==-1)a=false;if(i.mods.length==0&&!E[16]&&!E[18]&&!E[17]&&!E[91]||a){if(i.method(e,i)===false){if(e.preventDefault)e.preventDefault();else e.returnValue=false;if(e.stopPropagation)e.stopPropagation();if(e.cancelBubble)e.cancelBubble=true}}}}}function s(e){var n=e.keyCode,r,i=t(C,n);if(i>=0){C.splice(i,1)}if(n==93||n==224)n=91;if(n in E){E[n]=false;for(r in x)if(x[r]==n)u[r]=false}}function o(){for(b in E)E[b]=false;for(b in x)u[b]=false}function u(e,t,n){var r,i;r=v(e);if(n===undefined){n=t;t="all"}for(var s=0;s<r.length;s++){i=[];e=r[s].split("+");if(e.length>1){i=m(e);e=[e[e.length-1]]}e=e[0];e=N(e);if(!(e in w))w[e]=[];w[e].push({shortcut:r[s],scope:t,method:n,key:r[s],mods:i})}}function a(e,t){var r,i,s=[],o,u,a;r=v(e);for(u=0;u<r.length;u++){i=r[u].split("+");if(i.length>1){s=m(i);e=i[i.length-1]}e=N(e);if(t===undefined){t=p()}if(!w[e]){return}for(o in w[e]){a=w[e][o];if(a.scope===t&&n(a.mods,s)){w[e][o]={}}}}}function f(e){if(typeof e=="string"){e=N(e)}return t(C,e)!=-1}function l(){return C.slice(0)}function c(e){var t=(e.target||e.srcElement).tagName;return!(t=="INPUT"||t=="SELECT"||t=="TEXTAREA")}function h(e){S=e||"all"}function p(){return S||"all"}function d(e){var t,n,r;for(t in w){n=w[t];for(r=0;r<n.length;){if(n[r].scope===e)n.splice(r,1);else r++}}}function v(e){var t;e=e.replace(/\s/g,"");t=e.split(",");if(t[t.length-1]==""){t[t.length-2]+=","}return t}function m(e){var t=e.slice(0,e.length-1);for(var n=0;n<t.length;n++)t[n]=x[t[n]];return t}function g(e,t,n){if(e.addEventListener)e.addEventListener(t,n,false);else if(e.attachEvent)e.attachEvent("on"+t,function(){n(window.event)})}function y(){var t=e.key;e.key=L;return t}var b,w={},E={16:false,18:false,17:false,91:false},S="all",x={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},T={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},N=function(e){return T[e]||e.toUpperCase().charCodeAt(0)},C=[];for(b=1;b<20;b++)T["f"+b]=111+b;var k={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(b in x)u[b]=false;g(document,"keydown",function(e){i(e)});g(document,"keyup",s);g(window,"focus",o);var L=e.key;e.key=u;e.key.setScope=h;e.key.getScope=p;e.key.deleteScope=d;e.key.filter=c;e.key.isPressed=f;e.key.getPressedKeyCodes=l;e.key.noConflict=y;e.key.unbind=a;if(typeof module!=="undefined")module.exports=key})(this)(function(){"use strict";var e,t,n,r=function(){var e="Grooveshark - "+$("#now-playing-metadata").text();return e},i=function(){var e="Pandora - "+$(".info .playerBarSong").text()+" - "+$(".info .playerBarArtist").text();return e},s=function(){var e="Plug.dj - "+$("#now-playing-value").text();return e},o=function(){var e="Zaycev - "+$("#zp_current_song .ontheair_artist").text()+$("#zp_current_song .ontheair_song").text();return e},u=function(){var e="8tracks - "+$(".t").text()+" - "+$(".a").text();return e},a=function(){var e="Rdio - "+$(".song_title").text()+" - "+$(".text_metadata .artist_title").text();return e},f=function(){var e=$("title").text().replace("▶ ","Soundcloud - ");return e},l=function(){var e="Youtify - "+$(".info .title").text();return e},c={grooveshark:r,plug:s,pandora:i,zaycev:o,"8tracks":u,rdio:a,soundcloud:f,youtify:l},h=function(){var e=c[t]();console.log("groovemarklet: current playing song is: "+e);$("title").text(e);$(".SMGCurrentPlayingSong").text(e)},p=function(){if(n){e=setTimeout(h,5e3)}},d=function(){if(e){clearInterval(e)}},v=function(){var e=window.location.host.split(".")[0];return e},m=function(){n=false;$(".SMGSite").text(v()).attr("title","For more info, click me!").attr("href","").css("color","red").parent().append('<a href="http://obsproject.com/forum/viewtopic.php?f=22&t=4223">, not suported.</a>')},g=function(){n=true;$(".SMGSite").text(v()).css("color","green")},y=function(){var e=v();$(".SMGSite").text(e);if(e in c){g()}else{m()}},b=function(){var e="<div class='SMGContainer'><style>.SMGContainer *{margin: 0;padding: 0;}.SMGContainer{background-color: rgb(240, 240, 255);box-shadow: 0 0 3px black;border: 1px solid rgb(60, 60, 60);color: #444;position: fixed;bottom: 30px;right: 30px;width: 300px;height: 200px;}.SMGContainer h1{line-height: 16px;font-family: helvetica;font-size: 15px;}.SMGInformation{margin: 10px;}.SMGControls{margin: 10px;}.SMGCurrentPlayingSong{font-weight: bold;}.SMGLogo{display: inline-block;width: 16px;height: 16px;background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABCElEQVR42qVTgQ2CQAz83wA30AnEDZ4NYAJ1AnUCZAJlAt1AN9AN1AlkBDbANlzfh5RIYpMLfqnX3vWx5s+wA/mYkBLmOL8IV8LzF8GUcCI4FN+RdyDlc0aoNQIuuBEqwlrpxiQHNFmgrkPwwDMJO/QiQhMDEk+wArtnhgcxfIjwe4JallmwL0LgMNo56NYMmB7mMyGIlLEbyLkHZ4tGb2zFEzQYaT+CQCRzvrLQJgbOMImsMsN0F2VrqqYCzOJ0EhBUMLmGhJJwFEbRteMkRjQ9UyVY5kY2ZnsvctNeIu2PHFvTrtvXWIU9h4zSfO8E+7SEL50G2sfkMGIa5GqsjUk7V3zoaxwdH/3tQ5EfsW3gAAAAAElFTkSuQmCC);}.SMGSite{font-weight: bold;}.SMGSite + a, .SMGSite + a:active, .SMGSite + a:visited{color: red;text-decoration: none;}</style><div class='SMGInformation'><h1><span class='SMGLogo'></span> Groovemarklet, yay!</h1><br/><span class='SMGCurrentPlayingSong'>No song playing</span><p>You're on: <span class='SMGSite'></span></p></div><hr/><div class='SMGControls'><p class='SMGRunning'>Running</p><button class='SMGStart'>Stop</button><br/><br/><p>Hide and show me with <b>ctrl-m<b></p></div></div>";$("body").append(e)},w=function(){t=v();y();key("ctrl+m",function(){$(".SMGContainer").fadeToggle()});$(".SMGStart").click(function(){if($(this).text()==="Start"){$(".SMGRunning").text("Running.");$(this).text("Stop");p()}else if($(this).text()==="Stop"){$(".SMGRunning").text("Not running.");$(this).text("Start");d()}});p()};b();$(".SMGContainer").hide().fadeIn(200,w)}())